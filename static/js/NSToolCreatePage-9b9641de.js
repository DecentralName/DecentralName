import{_ as x,U as u,i as C,N as I,r as c,o as N,c as U,b as t,w as n,f as S,g as b,a as g,t as R,d as s,p as z,h as k}from"./index-99ca2959.js";import{C as v}from"./ChainHelper-f1334cb2.js";const P={name:"NSToolCreatePage",components:{},data(){return{priceData:[250,50,40,20,10,5,5,2],createNSData:{namespace:"",priceStr:"",bNeedRenewal:"1",renewalLifetime:1,renewalUnit:"years",bNeedPing:"1",pingLifetime:1,pingUnit:"years"}}},async mounted(){},methods:{onNamespaceInputChange(e){if(e=e.trim(),e.length==0){this.createNSData.priceStr="";return}if(e.startsWith(".")&&e.length>1&&(e=e.substring(1),this.createNSData.namespace=e),!e.match(/^[a-z]{1}[a-z|0-9|_]{0,31}$/)){this.createNSData.priceStr="";return}this.createNSData.priceStr=`(${this.priceData[Math.min(e.length,this.priceData.length)-1]} ether)`},async onClickCreate(){if(this.createNSData.namespace.startsWith(".")&&(this.createNSData.namespace=this.createNSData.namespace.substring(1)),!this.createNSData.namespace.match(/^[a-z]{1}[a-z|0-9|_]{0,31}$/)){u.alert("Invalid namespace");return}const e=this.createNSData;let l=0;if(e.bNeedRenewal=="1"){if(l=parseInt(e.renewalLifetime),!l){u.alert("Invalid renewal lifetime");return}e.renewalUnit=="years"?l*=86400*365:l*=86400}let p=0;if(e.bNeedRenewal=="0"&&e.bNeedPing=="1"){if(p=parseInt(e.pingLifetime),!p){u.alert("Invalid ping lifetime");return}e.pingUnit=="years"?p*=86400*365:p*=86400}let h=this;const a=this.priceData[Math.min(this.createNSData.namespace.length,this.priceData.length)-1],f=C(a.toString());console.log("Create namespace: ",{namespace:h.createNSData.namespace,renewalLifetime:l,pingLifetime:p,burnFee:f}),v.callExternal(async function(m){return await m.buyNamespace(u.str2Bytes32(h.createNSData.namespace),l,p,{value:f})},function(m){m.status==1?(u.alert("Create namespace success"),I.syncNamespaceInfos()):u.alert("Create namespace fail")})}}},r=e=>(z("data-v-f4cda7b9"),e=e(),k(),e),L=r(()=>s("div",{id:"inestTitle"},"Create namespace",-1)),T=r(()=>s("div",{id:"inestTip"},[s("div",null,"Anybody can create namespace(fee get burned). Permissionless totally!")],-1)),B=r(()=>s("span",{style:{"margin-left":"8px",color:"#333"}},"Starts with a-z, only allows 0-9, a-z, _, max 32 characters.",-1)),W=r(()=>s("div",{style:{"margin-bottom":"20px"}},"Tips:",-1)),E=r(()=>s("div",{class:"tipRow"},"Ping lifetime only makes sense when not need renewal.",-1)),A=r(()=>s("div",{class:"tipRow"},"If need ping, users have to ping before get expired(defined by ping lifetime).",-1)),F=r(()=>s("div",{class:"tipRow"},"Ping only cost gas fee.",-1)),H={class:"tipRow",style:{"margin-top":"16px"}},M=r(()=>s("div",{class:"tipRow"},"1. Set price",-1)),Y=r(()=>s("div",{class:"tipRow"},"2. Set custom name price(optional).",-1)),O=r(()=>s("div",{class:"tipRow"},"3. Open registration, so that anybody can register names in your namespace.",-1));function j(e,l,p,h,a,f){const m=c("el-input"),d=c("el-form-item"),o=c("el-option"),_=c("el-select"),y=c("el-button"),w=c("el-form"),D=c("router-link"),V=c("el-card");return N(),U("div",null,[L,T,t(w,{model:a.createNSData,"label-width":"120px",style:{"margin-top":"50px"}},{default:n(()=>[t(d,{label:"Namespace"},{default:n(()=>[t(m,{size:"large",class:"createNSItemWidth",maxlength:"32",clearable:"",modelValue:a.createNSData.namespace,"onUpdate:modelValue":l[0]||(l[0]=i=>a.createNSData.namespace=i),placeholder:"Input namespace",onInput:f.onNamespaceInputChange},null,8,["modelValue","onInput"]),B]),_:1}),t(d,{label:"Need renewal"},{default:n(()=>[t(_,{size:"large",modelValue:a.createNSData.bNeedRenewal,"onUpdate:modelValue":l[1]||(l[1]=i=>a.createNSData.bNeedRenewal=i),class:"createNSItemWidth"},{default:n(()=>[t(o,{label:"Yes",value:"1"}),t(o,{label:"No",value:"0"})]),_:1},8,["modelValue"])]),_:1}),a.createNSData.bNeedRenewal=="1"?(N(),S(d,{key:0,label:"Renewal lifetime"},{default:n(()=>[t(m,{size:"large",style:{width:"145px"},clearable:"",modelValue:a.createNSData.renewalLifetime,"onUpdate:modelValue":l[2]||(l[2]=i=>a.createNSData.renewalLifetime=i)},null,8,["modelValue"]),t(_,{size:"large",modelValue:a.createNSData.renewalUnit,"onUpdate:modelValue":l[3]||(l[3]=i=>a.createNSData.renewalUnit=i),style:{"margin-left":"10px",width:"145px"}},{default:n(()=>[t(o,{label:"years",value:"years"}),t(o,{label:"days",value:"days"})]),_:1},8,["modelValue"])]),_:1})):b("",!0),a.createNSData.bNeedRenewal=="0"?(N(),S(d,{key:1,label:"Need ping"},{default:n(()=>[t(_,{size:"large",modelValue:a.createNSData.bNeedPing,"onUpdate:modelValue":l[4]||(l[4]=i=>a.createNSData.bNeedPing=i),class:"createNSItemWidth"},{default:n(()=>[t(o,{label:"Yes",value:"1"}),t(o,{label:"No",value:"0"})]),_:1},8,["modelValue"])]),_:1})):b("",!0),a.createNSData.bNeedRenewal=="0"&&a.createNSData.bNeedPing=="1"?(N(),S(d,{key:2,label:"Ping lifetime"},{default:n(()=>[t(m,{size:"large",style:{width:"145px"},clearable:"",modelValue:a.createNSData.pingLifetime,"onUpdate:modelValue":l[5]||(l[5]=i=>a.createNSData.pingLifetime=i)},null,8,["modelValue"]),t(_,{size:"large",modelValue:a.createNSData.pingUnit,"onUpdate:modelValue":l[6]||(l[6]=i=>a.createNSData.pingUnit=i),style:{"margin-left":"10px",width:"145px"}},{default:n(()=>[t(o,{label:"years",value:"years"}),t(o,{label:"days",value:"days"})]),_:1},8,["modelValue"])]),_:1})):b("",!0),t(d,null,{default:n(()=>[t(y,{type:"primary",onClick:f.onClickCreate,disabled:a.createNSData.priceStr.length==0},{default:n(()=>[g("Create "+R(a.createNSData.priceStr),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1},8,["model"]),t(V,{style:{"margin-top":"80px",width:"100%","font-size":"14px"}},{default:n(()=>[s("div",null,[W,E,A,F,s("div",H,[g("After creating namespace, you should go "),t(D,{to:"/tools/namespace/manager",replace:""},{default:n(()=>[g("here")]),_:1}),g(" and:")]),M,Y,O])]),_:1})])}const J=x(P,[["render",j],["__scopeId","data-v-f4cda7b9"]]);export{J as default};
